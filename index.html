<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDFD Docs | Function Explorer</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #05070a;
            --card-bg: #11141d;
            --accent: #00d2ff;
            --premium: #ffd700;
            --text: #e2e8f0;
            --dim: #94a3b8;
            --border: #1e293b;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1300px; margin: 0 auto; padding: 40px 20px; }

        header { text-align: center; margin-bottom: 60px; }
        h1 { font-size: 3.5rem; font-weight: 800; margin-bottom: 10px; background: linear-gradient(to right, #00d2ff, #3a7bd5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .search-box {
            width: 100%; max-width: 600px; padding: 18px 25px; border-radius: 15px;
            background: var(--card-bg); border: 1px solid var(--border);
            color: white; font-size: 1.1rem; outline: none; transition: 0.3s;
            margin-bottom: 40px;
        }
        .search-box:focus { border-color: var(--accent); box-shadow: 0 0 20px rgba(0, 210, 255, 0.1); }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px; }

        .card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 20px; padding: 25px; transition: 0.3s;
            position: relative; display: flex; flex-direction: column;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--accent); }

        .tag { font-family: 'Fira Code', monospace; color: var(--accent); font-size: 1.25rem; font-weight: 600; }
        .desc { color: var(--dim); margin: 15px 0; font-size: 0.95rem; line-height: 1.6; }
        
        .args-box {
            background: #000; padding: 10px; border-radius: 8px; font-size: 0.8rem;
            color: #10b981; font-family: 'Fira Code', monospace; margin-bottom: 15px;
            border: 1px solid #10b98133;
        }

        .prem-label {
            position: absolute; top: 15px; right: 15px;
            background: rgba(255, 215, 0, 0.1); color: var(--premium);
            padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: 800;
        }

        .copy-btn {
            background: var(--accent); color: #000; border: none;
            padding: 10px 20px; border-radius: 10px; font-weight: 700;
            cursor: pointer; transition: 0.2s; align-self: flex-start;
        }
        .copy-btn:hover { opacity: 0.8; transform: scale(0.98); }

        #loading { font-size: 1.5rem; text-align: center; color: var(--accent); margin-top: 100px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>BDFD Docs</h1>
        <p style="color: var(--dim)">The Ultimate Function Reference</p>
        <input type="text" id="search" class="search-box" placeholder="Search for functions, keywords, or intents...">
    </header>

    <div id="loading">Establishing secure connection to API...</div>
    <div class="grid" id="grid"></div>
</div>

<script>
    const grid = document.getElementById('grid');
    const search = document.getElementById('search');
    const loading = document.getElementById('loading');
    let functions = [];

    // Using a CORS Proxy to bypass the ERR_NETWORK / CORS issue
    const PROXY = 'https://api.allorigins.win/raw?url=';
    const API_URL = 'https://botdesignerdiscord.com/public/api/function_list';

    async function init() {
        try {
            const res = await axios.get(PROXY + encodeURIComponent(API_URL));
            functions = res.data;
            loading.style.display = 'none';
            render(functions);
        } catch (err) {
            loading.innerHTML = `<span style="color:#ff4d4d">CORS Error: Please try using a local server or a different browser.</span>`;
            console.error(err);
        }
    }

    function render(data) {
        grid.innerHTML = '';
        data.forEach(item => {
            const card = document.createElement('div');
            card.className = 'card';
            
            // Format arguments if they exist
            const argsDisp = item.arguments 
                ? `<div class="args-box">Args: ${item.arguments.join(', ')}</div>` 
                : `<div class="args-box" style="color: #64748b">No arguments required</div>`;

            card.innerHTML = `
                ${item.premium ? '<div class="prem-label">PREMIUM</div>' : ''}
                <div class="tag">${item.tag}</div>
                <div class="desc">${item.shortDescription || 'Information for this function is being updated.'}</div>
                ${argsDisp}
                <div style="display:flex; justify-content: space-between; align-items: center; margin-top: auto;">
                    <span style="font-size: 0.8rem; color: var(--dim)">Intent: ${item.intents}</span>
                    <button class="copy-btn" onclick="copy('${item.tag}')">Copy Tag</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    search.addEventListener('input', (e) => {
        const val = e.target.value.toLowerCase();
        const filtered = functions.filter(f => 
            f.tag.toLowerCase().includes(val) || 
            f.shortDescription.toLowerCase().includes(val)
        );
        render(filtered);
    });

    function copy(text) {
        navigator.clipboard.writeText(text);
        const btn = event.target;
        btn.innerText = 'Copied!';
        btn.style.background = '#10b981';
        setTimeout(() => {
            btn.innerText = 'Copy Tag';
            btn.style.background = 'var(--accent)';
        }, 1500);
    }

    init();
</script>

</body>
</html>
